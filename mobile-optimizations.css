/* ======================================
   OPTIMISATIONS MOBILE - iPhone 14 Plus et tous devices
   ====================================== */

/* iPhone 14 Plus: 428x926px (2778x1284 logical pixels) */
/* iPhone 14 Pro Max: 430x932px */

/* Amélioration des touch targets (minimum 44x44px) */
@media (max-width: 768px) {

    /* Boutons plus grands pour tactile */
    button,
    .audio-btn,
    .back-to-top,
    .banner-btn,
    .carousel-btn {
        min-width: 48px !important;
        min-height: 48px !important;
        padding: 12px 20px !important;
        font-size: 1rem !important;
    }

    /* Back to top plus visible */
    .back-to-top {
        width: 56px !important;
        height: 56px !important;
        bottom: 20px !important;
        right: 20px !important;
        font-size: 28px !important;
        box-shadow: 0 6px 24px rgba(0, 0, 0, 0.3) !important;
    }

    /* Guestbook banner optimisée mobile */
    .guestbook-banner {
        bottom: 80px !important; /* Au-dessus du back-to-top */
        left: 10px !important;
        right: 10px !important;
        width: calc(100% - 20px) !important;
        max-width: 100% !important;
        padding: 16px !important;
        border-radius: 16px !important;
    }

    .banner-content {
        flex-direction: column !important;
        gap: 12px !important;
        text-align: center !important;
    }

    .banner-text {
        font-size: 0.95rem !important;
    }

    .banner-btn {
        width: 100% !important;
        padding: 14px 24px !important;
    }

    /* Hero optimisé mobile */
    .hero {
        height: 100vh !important;
        height: 100dvh !important; /* Dynamic viewport height (iOS Safari) */
    }

    .hero-content {
        padding: 30px 20px !important;
        margin: 0 20px !important;
        max-width: calc(100% - 40px) !important;
    }

    .hero-title {
        font-size: 2.2rem !important;
        line-height: 1.2 !important;
    }

    .hero-title .vietnamese {
        font-size: 1.8rem !important;
    }

    .hero-subtitle {
        font-size: 1.1rem !important;
        margin-bottom: 20px !important;
    }

    /* Timeline sections plus compactes */
    .timeline-section {
        padding: 40px 20px !important;
        flex-direction: column !important;
    }

    .timeline-content {
        flex-direction: column !important;
        gap: 30px !important;
    }

    .timeline-image,
    .timeline-text {
        width: 100% !important;
        max-width: 100% !important;
        text-align: center !important;
    }

    .timeline-image img {
        width: 100% !important;
        max-width: 400px !important;
        margin: 0 auto !important;
    }

    .timeline-badge {
        width: 60px !important;
        height: 60px !important;
        font-size: 1.5rem !important;
        left: 30px !important; /* Align with timeline-line on mobile */
    }

    /* Gallery optimisée mobile */
    .gallery-grid {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
        padding: 20px !important;
    }

    .gallery-item {
        border-radius: 16px !important;
    }

    .gallery-toggle {
        flex-direction: column !important;
        gap: 10px !important;
        width: 100% !important;
    }

    .toggle-btn {
        width: 100% !important;
        padding: 14px 20px !important;
        font-size: 1rem !important;
    }

    /* Carousel mobile */
    .carousel-container {
        height: 60vh !important;
        margin: 20px 0 !important;
    }

    .carousel-btn {
        width: 48px !important;
        height: 48px !important;
        font-size: 2rem !important;
    }

    .carousel-prev {
        left: 10px !important;
    }

    .carousel-next {
        right: 10px !important;
    }

    .carousel-indicators {
        bottom: 10px !important;
    }

    /* Formulaire guestbook mobile */
    .guestbook-section {
        padding: 40px 20px !important;
    }

    .form-container {
        padding: 30px 20px !important;
        border-radius: 20px !important;
    }

    .form-group {
        margin-bottom: 20px !important;
    }

    .form-group input,
    .form-group textarea {
        font-size: 16px !important; /* Évite le zoom auto iOS */
        padding: 14px !important;
        border-radius: 12px !important;
    }

    .form-group textarea {
        min-height: 120px !important;
    }

    /* Emoji selection mobile */
    .emoji-grid {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 12px !important;
    }

    .emoji-label {
        padding: 14px !important;
        font-size: 2rem !important;
    }

    /* Visibility options mobile */
    .visibility-options {
        flex-direction: column !important;
        gap: 12px !important;
    }

    .visibility-label {
        width: 100% !important;
        padding: 14px !important;
    }

    /* Bouton submit plus visible */
    .submit-btn {
        width: 100% !important;
        padding: 16px 32px !important;
        font-size: 1.1rem !important;
        margin-top: 20px !important;
    }

    /* Messages guestbook mobile */
    .guestbook-messages {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
    }

    .guestbook-message {
        padding: 20px !important;
        border-radius: 16px !important;
    }

    /* Toggle private messages mobile */
    #showPrivateToggle {
        padding: 14px 24px !important;
        font-size: 1rem !important;
        border-radius: 12px !important;
    }

    /* Lightbox mobile */
    .lightbox {
        padding: 10px !important;
    }

    .lightbox-content {
        max-width: 95vw !important;
        max-height: 85vh !important;
    }

    .lightbox-close {
        top: 10px !important;
        right: 10px !important;
        width: 48px !important;
        height: 48px !important;
        font-size: 2rem !important;
    }

    /* Footer mobile */
    footer {
        padding: 30px 20px !important;
        font-size: 0.9rem !important;
    }

    /* Éviter le débordement de texte */
    h1, h2, h3, h4, h5, h6 {
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
    }

    /* Images responsive */
    img {
        max-width: 100% !important;
        height: auto !important;
    }

    /* Pas de hover effects sur mobile (tactile) */
    .gallery-item:hover,
    .guestbook-message:hover,
    button:hover {
        transform: none !important;
    }

    /* Améliorer le tap highlight */
    * {
        -webkit-tap-highlight-color: rgba(212, 81, 111, 0.2) !important;
    }

    /* Smooth scroll iOS */
    body {
        -webkit-overflow-scrolling: touch !important;
    }

    /* Safe area pour iPhone notch */
    @supports (padding: max(0px)) {
        .hero-content {
            padding-left: max(20px, env(safe-area-inset-left)) !important;
            padding-right: max(20px, env(safe-area-inset-right)) !important;
        }

        .guestbook-banner {
            left: max(10px, env(safe-area-inset-left)) !important;
            right: max(10px, env(safe-area-inset-right)) !important;
        }

        footer {
            padding-bottom: max(30px, env(safe-area-inset-bottom)) !important;
        }
    }
}

/* Extra small devices (petits téléphones) */
@media (max-width: 375px) {
    .hero-title {
        font-size: 1.8rem !important;
    }

    .hero-title .vietnamese {
        font-size: 1.5rem !important;
    }

    .timeline-badge {
        width: 50px !important;
        height: 50px !important;
        font-size: 1.2rem !important;
        left: 25px !important; /* Align with timeline-line on small mobile */
    }

    .guestbook-banner {
        font-size: 0.85rem !important;
    }
}

/* Landscape mobile */
@media (max-width: 768px) and (orientation: landscape) {
    .hero {
        height: 100vh !important;
    }

    .hero-content {
        padding: 20px !important;
    }

    .hero-title {
        font-size: 1.8rem !important;
    }

    .carousel-container {
        height: 80vh !important;
    }
}

/* Touch-specific improvements */
@media (hover: none) and (pointer: coarse) {
    /* C'est un device tactile */

    button,
    a,
    label {
        cursor: default !important;
    }

    /* Améliorer la zone de clic */
    .emoji-label::before,
    .visibility-label::before {
        content: '';
        position: absolute;
        top: -10px;
        left: -10px;
        right: -10px;
        bottom: -10px;
    }
}

/* Optimisation pour iPhone 14 Plus spécifiquement */
@media only screen
  and (device-width: 428px)
  and (device-height: 926px)
  and (-webkit-device-pixel-ratio: 3) {

    /* Ajustements spécifiques iPhone 14 Plus */
    .hero {
        height: 100dvh !important; /* Dynamic viewport */
    }

    /* Gérer le notch et dynamic island */
    .back-to-top {
        bottom: calc(20px + env(safe-area-inset-bottom)) !important;
    }
}
