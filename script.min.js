const audioToggle=document.getElementById("audioToggle"),bgMusic=document.getElementById("bgMusic");let isPlaying=!1;audioToggle.addEventListener("click",()=>{isPlaying?(bgMusic.pause(),audioToggle.textContent="ğŸµ",audioToggle.classList.remove("playing")):(bgMusic.play(),audioToggle.textContent="ğŸ”Š",audioToggle.classList.add("playing")),isPlaying=!isPlaying});const heartsContainer=document.getElementById("heartsContainer"),heartEmojis=["ğŸ’•","ğŸ’—","ğŸ’–","ğŸ’","ğŸ’“","ğŸ’"];function createHeart(){const e=document.createElement("div");e.classList.add("heart"),e.textContent=heartEmojis[Math.floor(Math.random()*heartEmojis.length)],e.style.left=100*Math.random()+"%",e.style.animationDuration=3*Math.random()+5+"s",e.style.animationDelay=2*Math.random()+"s",heartsContainer.appendChild(e),setTimeout(()=>{e.remove()},1e4)}setInterval(createHeart,1500);for(let e=0;e<5;e++)setTimeout(createHeart,300*e);window.addEventListener("scroll",()=>{const e=window.pageYOffset,t=document.querySelector(".parallax-img");t&&(t.style.transform=`translateY(${.5*e}px)`)});const reveals=document.querySelectorAll(".reveal"),revealObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.dataset.delay||0;setTimeout(()=>{e.target.classList.add("active")},t),revealObserver.unobserve(e.target)}})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});reveals.forEach(e=>{revealObserver.observe(e)});const galleryItems=document.querySelectorAll(".gallery-item img"),lightbox=document.getElementById("lightbox"),lightboxImg=document.getElementById("lightbox-img"),lightboxClose=document.querySelector(".lightbox-close");function closeLightbox(){lightbox.classList.remove("active"),document.body.style.overflow="auto"}galleryItems.forEach(e=>{e.addEventListener("click",()=>{lightboxImg.src=e.src,lightbox.classList.add("active"),document.body.style.overflow="hidden"})}),lightboxClose.addEventListener("click",closeLightbox),lightbox.addEventListener("click",e=>{e.target===lightbox&&closeLightbox()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&lightbox.classList.contains("active")&&closeLightbox()}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})}),document.addEventListener("mousemove",e=>{if(Math.random()>.95){const t=document.createElement("div");t.style.position="fixed",t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",t.style.width="5px",t.style.height="5px",t.style.background="#ffc0cb",t.style.borderRadius="50%",t.style.pointerEvents="none",t.style.zIndex="9999",t.style.animation="sparkle 1s ease-out forwards",document.body.appendChild(t),setTimeout(()=>t.remove(),1e3)}});const style=document.createElement("style");style.textContent="\n    @keyframes sparkle {\n        0% {\n            transform: scale(0);\n            opacity: 1;\n        }\n        100% {\n            transform: scale(3);\n            opacity: 0;\n        }\n    }\n",document.head.appendChild(style),window.addEventListener("load",()=>{document.querySelectorAll("img").forEach(e=>{(new Image).src=e.src})}),window.addEventListener("load",()=>{document.body.style.opacity="0",setTimeout(()=>{document.body.style.transition="opacity 1s ease-in",document.body.style.opacity="1"},100)});const scrollProgress=document.getElementById("scrollProgress");window.addEventListener("scroll",()=>{const e=(window.pageYOffset||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;scrollProgress.style.width=e+"%"});const backToTopBtn=document.getElementById("backToTop");window.addEventListener("scroll",()=>{window.pageYOffset>500?backToTopBtn.classList.add("visible"):backToTopBtn.classList.remove("visible")}),backToTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const goldenParticlesContainer=document.getElementById("goldenParticles");function createGoldenParticle(){const e=document.createElement("div");e.classList.add("golden-particle"),e.style.left=100*Math.random()+"%",e.style.animationDuration=5*Math.random()+8+"s",e.style.animationDelay=3*Math.random()+"s",goldenParticlesContainer.appendChild(e),setTimeout(()=>{e.remove()},13e3)}setInterval(createGoldenParticle,2e3);for(let e=0;e<8;e++)setTimeout(createGoldenParticle,400*e);const confettiContainer=document.getElementById("confettiContainer"),confettiColors=["#d4af37","#ffc0cb","#d4516f","#e89bb5","#ffd700"];function createConfetti(){const e=document.createElement("div");e.classList.add("confetti"),e.style.left=100*Math.random()+"%",e.style.background=confettiColors[Math.floor(Math.random()*confettiColors.length)],e.style.animationDuration=2*Math.random()+3+"s",e.style.animationDelay=2*Math.random()+"s",e.style.width=10*Math.random()+5+"px",e.style.height=10*Math.random()+5+"px",confettiContainer.appendChild(e),setTimeout(()=>{e.remove()},6e3)}const finalSection=document.querySelector(".final-section"),confettiObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=setInterval(createConfetti,150);for(let e=0;e<30;e++)setTimeout(createConfetti,50*e);setTimeout(()=>{clearInterval(t)},1e4),confettiObserver.unobserve(e.target)}})},{threshold:.3});finalSection&&confettiObserver.observe(finalSection);const shareBtn=document.getElementById("shareBtn");shareBtn&&shareBtn.addEventListener("click",function(e){const t=document.createElement("span");t.classList.add("ripple");const s=this.getBoundingClientRect(),n=e.clientX-s.left,o=e.clientY-s.top;t.style.left=n+"px",t.style.top=o+"px",this.appendChild(t),setTimeout(()=>t.remove(),600),navigator.share?navigator.share({title:"Notre Mariage ğŸ’•",text:"Venez cÃ©lÃ©brer notre mariage!",url:window.location.href}).catch(()=>{}):navigator.clipboard.writeText(window.location.href).then(()=>{const e=shareBtn.innerHTML;shareBtn.innerHTML='<span>âœ“ Lien copiÃ©!</span><span class="vietnamese-cta">ÄÃ£ sao chÃ©p!</span>',setTimeout(()=>{shareBtn.innerHTML=e},2e3)})}),document.querySelectorAll("button, .gallery-item").forEach(e=>{e.addEventListener("click",function(e){if(this.classList.contains("gallery-item"))return;const t=document.createElement("span");t.classList.add("ripple");const s=this.getBoundingClientRect(),n=e.clientX-s.left,o=e.clientY-s.top;t.style.left=n+"px",t.style.top=o+"px",t.style.position="absolute",this.style.position="relative",this.style.overflow="hidden",this.appendChild(t),setTimeout(()=>t.remove(),600)})});const timelineBadges=document.querySelectorAll(".timeline-badge"),badgeObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.animation="badge-pulse 2s infinite, badge-entrance 0.8s ease-out",badgeObserver.unobserve(e.target))})},{threshold:.5});timelineBadges.forEach(e=>{badgeObserver.observe(e)});const badgeStyle=document.createElement("style");badgeStyle.textContent="\n    @keyframes badge-entrance {\n        0% {\n            transform: translate(-50%, -50%) scale(0) rotate(-180deg);\n            opacity: 0;\n        }\n        100% {\n            transform: translate(-50%, -50%) scale(1) rotate(0deg);\n            opacity: 1;\n        }\n    }\n",document.head.appendChild(badgeStyle);const originalSparkle=document.addEventListener;document.addEventListener("mousemove",e=>{if(Math.random()>.97){const t=document.createElement("div");t.style.position="fixed",t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",t.style.width="6px",t.style.height="6px",t.style.background=Math.random()>.5?"#d4af37":"#ffc0cb",t.style.borderRadius="50%",t.style.pointerEvents="none",t.style.zIndex="9999",t.style.boxShadow="0 0 10px currentColor",t.style.animation="sparkle 1.2s ease-out forwards",document.body.appendChild(t),setTimeout(()=>t.remove(),1200)}});const animateText=e=>{const t=e.textContent;e.textContent="",e.style.opacity="1",[...t].forEach((t,s)=>{const n=document.createElement("span");n.textContent=t,n.style.opacity="0",n.style.display="inline-block",n.style.animation=`letter-appear 0.5s ease forwards ${.03*s}s`,e.appendChild(n)})},letterStyle=document.createElement("style");letterStyle.textContent="\n    @keyframes letter-appear {\n        0% {\n            opacity: 0;\n            transform: translateY(20px) rotateX(-90deg);\n        }\n        100% {\n            opacity: 1;\n            transform: translateY(0) rotateX(0deg);\n        }\n    }\n",document.head.appendChild(letterStyle),window.addEventListener("load",()=>{setTimeout(()=>{document.querySelectorAll(".hero-title .french, .hero-title .vietnamese").forEach((e,t)=>{setTimeout(()=>animateText(e),800*t)})},500)});const GUESTBOOK_STORAGE_KEY="wedding_guestbook_messages";class Guestbook{constructor(){this.form=document.getElementById("guestbookForm"),this.messagesContainer=document.getElementById("guestbookMessages"),this.emptyState=document.getElementById("guestbookEmpty"),this.toggleBtn=document.getElementById("showPrivateToggle"),this.messages=this.loadMessages(),this.showPrivate=!1,this.init()}init(){this.form.addEventListener("submit",e=>this.handleSubmit(e)),this.toggleBtn&&this.toggleBtn.addEventListener("click",()=>this.togglePrivateMessages()),this.displayMessages()}loadMessages(){const e=localStorage.getItem(GUESTBOOK_STORAGE_KEY);return e?JSON.parse(e):[]}saveMessages(){localStorage.setItem(GUESTBOOK_STORAGE_KEY,JSON.stringify(this.messages))}handleSubmit(e){e.preventDefault();const t=document.getElementById("guestName").value.trim(),s=document.getElementById("guestMessage").value.trim(),n=document.querySelector('input[name="emoji"]:checked').value,o=document.querySelector('input[name="visibility"]:checked').value;if(!t||!s)return;const a={id:Date.now(),name:t,text:s,emoji:n,visibility:o,date:(new Date).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})};this.messages.unshift(a),this.saveMessages(),this.displayMessages(),this.form.reset(),this.showSuccessMessage(),setTimeout(()=>{this.messagesContainer.scrollIntoView({behavior:"smooth",block:"nearest"})},300)}togglePrivateMessages(){this.showPrivate=!this.showPrivate,this.showPrivate?(this.toggleBtn.classList.add("active"),this.toggleBtn.querySelector(".toggle-icon").textContent="ğŸ”“",this.toggleBtn.querySelector(".french").textContent="Masquer les messages privÃ©s",this.toggleBtn.querySelector(".vietnamese").textContent="áº¨n tin nháº¯n riÃªng tÆ°",document.querySelectorAll('.guestbook-message[data-visibility="private"]').forEach(e=>{e.classList.add("show-private")})):(this.toggleBtn.classList.remove("active"),this.toggleBtn.querySelector(".toggle-icon").textContent="ğŸ”’",this.toggleBtn.querySelector(".french").textContent="Afficher les messages privÃ©s",this.toggleBtn.querySelector(".vietnamese").textContent="Hiá»‡n tin nháº¯n riÃªng tÆ°",document.querySelectorAll('.guestbook-message[data-visibility="private"]').forEach(e=>{e.classList.remove("show-private")}))}showSuccessMessage(){const e=document.querySelector(".guestbook-submit"),t=e.innerHTML;e.innerHTML='<span>âœ“ Merci !</span><span class="vietnamese">Cáº£m Æ¡n !</span>',e.style.background="linear-gradient(135deg, #28a745, #20c997)",setTimeout(()=>{e.innerHTML=t,e.style.background=""},2e3)}displayMessages(){if(0===this.messages.length)return this.emptyState.classList.add("visible"),void(this.messagesContainer.innerHTML="");this.emptyState.classList.remove("visible"),this.messagesContainer.innerHTML=this.messages.map(e=>{const t=e.visibility||"public",s=this.getVisibilityBadge(t),n="anonymous"===t?"Utilisateur":this.escapeHtml(e.name);return`\n                <div class="guestbook-message" data-id="${e.id}" data-visibility="${t}">\n                    <div class="message-visibility-badge ${s.class}">\n                        <span>${s.icon}</span>\n                        <span>${s.label}</span>\n                    </div>\n                    <button class="message-delete" onclick="guestbook.deleteMessage(${e.id})" title="Supprimer">Ã—</button>\n                    <div class="message-header">\n                        <div class="message-emoji">${e.emoji}</div>\n                        <div class="message-info">\n                            <div class="message-name">${n}</div>\n                            <div class="message-date">${e.date}</div>\n                        </div>\n                    </div>\n                    <div class="message-text">${this.escapeHtml(e.text)}</div>\n                </div>\n            `}).join(""),this.updateCounter()}getVisibilityBadge(e){const t={public:{icon:"ğŸ‘ï¸",label:"Public",class:"badge-public"},anonymous:{icon:"ğŸ­",label:"Anonyme",class:"badge-anonymous"},private:{icon:"ğŸ”’",label:"PrivÃ©",class:"badge-private"}};return t[e]||t.public}updateCounter(){let e=document.querySelector(".message-counter");e||(e=document.createElement("div"),e.className="message-counter",this.messagesContainer.parentNode.insertBefore(e,this.messagesContainer));const t=this.messages.length;e.innerHTML=`\n            <span class="count">${t}</span>\n            ${1===t?"message":"messages"}\n            <span style="opacity: 0.7;">/ tin nháº¯n</span>\n        `}deleteMessage(e){if(!confirm("Voulez-vous vraiment supprimer ce message ?\nBáº¡n cÃ³ cháº¯c muá»‘n xÃ³a tin nháº¯n nÃ y?"))return;const t=document.querySelector(`[data-id="${e}"]`);t&&(t.style.animation="message-disappear 0.4s ease-out",setTimeout(()=>{this.messages=this.messages.filter(t=>t.id!==e),this.saveMessages(),this.displayMessages()},400))}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}}const guestbookStyle=document.createElement("style");guestbookStyle.textContent="\n    @keyframes message-disappear {\n        0% {\n            opacity: 1;\n            transform: scale(1);\n        }\n        100% {\n            opacity: 0;\n            transform: scale(0.8) translateY(-20px);\n        }\n    }\n",document.head.appendChild(guestbookStyle),window.addEventListener("load",()=>{setTimeout(()=>{const e=localStorage.getItem(GUESTBOOK_STORAGE_KEY);if(!e||0===JSON.parse(e).length){const e=[{id:Date.now()-1e3,name:"Marie & Pierre",text:"FÃ©licitations pour votre magnifique union ! Nous vous souhaitons tout le bonheur du monde. ğŸ’•",emoji:"ğŸ’•",visibility:"public",date:new Date(Date.now()-864e5).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})},{id:Date.now()-2e3,name:"Nguyá»…n Thá»‹ Lan",text:"ChÃºc hai báº¡n trÄƒm nÄƒm háº¡nh phÃºc! MÃ£i mÃ£i bÃªn nhau nhÃ©! ğŸ¥‚",emoji:"ğŸ¥‚",visibility:"anonymous",date:new Date(Date.now()-1728e5).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})},{id:Date.now()-3e3,name:"Jean & Sophie",text:"Un message privÃ© juste pour vous : Votre amour est inspirant ! Profitez de chaque instant ensemble. ğŸ’–",emoji:"ğŸ’–",visibility:"private",date:new Date(Date.now()-2592e5).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}];localStorage.setItem(GUESTBOOK_STORAGE_KEY,JSON.stringify(e)),guestbook&&(guestbook.messages=e,guestbook.displayMessages())}},1e3)}),console.log("ğŸ’• Site de mariage chargÃ© avec amour! ğŸ’•"),console.log("ğŸ’— Wedding website loaded with love! ğŸ’—"),console.log("âœ¨ Premium UI activated! âœ¨"),console.log("ğŸ“– Guestbook ready! âœ¨"),function(){const e=document.getElementById("guestbookBanner"),t=document.getElementById("closeBanner"),s=document.getElementById("guestbook");let n="true"===sessionStorage.getItem("bannerDismissed");n||setTimeout(()=>{e.classList.add("show")},3e3),t.addEventListener("click",()=>{e.classList.remove("show"),sessionStorage.setItem("bannerDismissed","true")});const o=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting?e.classList.remove("show"):n||window.scrollY<s.offsetTop-200&&e.classList.add("show")})},{threshold:.1});s&&o.observe(s)}();